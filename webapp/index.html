<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Terra ‚Äî –ø–∞–Ω–µ–ª—å</title>
  <link rel="stylesheet" href="./app.css?v=12" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
</head>
<body>
  <div class="app">
    <header class="topbar" hidden></header>

    <main class="content">
      <section id="screenDashboard">
      <section class="card profile">
        <div style="position:absolute; right:12px; top:12px; display:flex; gap:8px; align-items:center;">
          <button class="iconBtn" id="notificationsBtn" type="button" aria-label="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è" style="position:relative;">üîî
            <span id="notificationsBadge" hidden style="position:absolute; right:-2px; top:-4px; min-width:18px; height:18px; padding:0 5px; border-radius:10px; background:rgba(255,93,93,.95); color:#fff; font-size:12px; display:flex; align-items:center; justify-content:center; border:1px solid rgba(255,255,255,.18);"></span>
          </button>
          <button class="iconBtn" id="settingsBtn" type="button" aria-label="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">‚öô</button>
        </div>

        <div class="profile__row">
          <div class="avatar" aria-hidden="true">
            <div class="avatar__inner" id="avatar">T</div>
          </div>
          <div class="profile__meta">
            <div class="profile__name" id="fullName">‚Äî</div>
            <div class="profile__role" id="role">‚Äî</div>
          </div>
        </div>

        <div class="miniStats">
          <div class="miniStat">
            <div class="miniStat__label">–ù–µ–¥–µ–ª—è</div>
            <div class="miniStat__value" id="weekValue">‚Äî</div>
            <div class="miniStat__hint" id="weekHint">‚Äî</div>
          </div>
          <div class="miniStat">
            <div class="miniStat__label">–ú–µ—Å—è—Ü</div>
            <div class="miniStat__value" id="monthValue">‚Äî</div>
            <div class="miniStat__hint" id="monthHint">‚Äî</div>
          </div>
        </div>

        <section class="weather weather--clouds" id="weatherCard" style="margin-top:12px">
          <div class="weather__top">
            <div class="weather__place" id="weatherPlace">‚Äî</div>
            <div class="weather__temp" id="weatherTemp">‚Äî</div>
          </div>
          <div class="weather__bottom">
            <div class="weather__desc" id="weatherDesc">‚Äî</div>
            <div class="weather__meta">
              <span id="weatherPrecip">‚Äî</span>
              <span id="weatherUpdated">‚Äî</span>
            </div>
          </div>
        </section>
      </section>

      <section class="card">
        <div class="sectionTitle">–î–µ–π—Å—Ç–≤–∏—è</div>
        <div class="actions" id="actions"></div>
      </section>

      </section>

      <section class="card" id="screenNotifications" hidden>
        <div class="sectionTitle">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</div>
        <div id="notificationsResult" style="margin-top:8px; font-size:13px; color:var(--muted)"></div>
        <div id="notificationsList" style="margin-top:10px"></div>
      </section>

      <section class="card" id="screenOtd" hidden>
        <div class="sectionTitle">–û–¢–î ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —á–∞—Å—ã</div>
        <div style="display:flex; flex-direction:column; gap:10px">
          <label>
            <div style="font-size:12px; color:var(--muted); margin-bottom:6px">–î–∞—Ç–∞</div>
            <div class="inputWrap">
              <input id="otdDate" type="date" class="inputInner" />
            </div>
            <div class="fieldError" id="otdDateError" hidden></div>
          </label>
          <label>
            <div style="font-size:12px; color:var(--muted); margin-bottom:6px">–ß–∞—Å—ã</div>
            <input id="otdHours" type="number" min="1" max="24" step="1" placeholder="‚Äî" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)" />
            <div class="fieldError" id="otdHoursError" hidden></div>
          </label>
          <label>
            <div style="font-size:12px; color:var(--muted); margin-bottom:6px">–¢–∏–ø —Ä–∞–±–æ—Ç—ã</div>
            <select id="otdWorkType" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)">
              <option value="">–í—ã–±–µ—Ä–∏—Ç–µ</option>
              <option value="tech">–¢–µ—Ö–Ω–∏–∫–∞</option>
              <option value="hand">–†—É—á–Ω–∞—è</option>
            </select>
            <div class="fieldError" id="otdWorkTypeError" hidden></div>
          </label>

          <label id="otdMachineKindWrap" hidden>
            <div style="font-size:12px; color:var(--muted); margin-bottom:6px">–¢–µ—Ö–Ω–∏–∫–∞ (—Ç–∏–ø)</div>
            <select id="otdMachineKind" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)"></select>
          </label>

          <label id="otdMachineNameWrap" hidden>
            <div style="font-size:12px; color:var(--muted); margin-bottom:6px">–¢–µ—Ö–Ω–∏–∫–∞ (–Ω–∞–∑–≤–∞–Ω–∏–µ)</div>
            <select id="otdMachineName" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)"></select>
          </label>

          <label id="otdMachineOtherWrap" hidden>
            <div style="font-size:12px; color:var(--muted); margin-bottom:6px">–£—Ç–æ—á–Ω–∏—Ç–µ —Ç–µ—Ö–Ω–∏–∫—É</div>
            <input id="otdMachineOther" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)" />
            <div class="fieldError" id="otdMachineOtherError" hidden></div>
          </label>

          <label>
            <div style="font-size:12px; color:var(--muted); margin-bottom:6px">–í–∏–¥ —Ä–∞–±–æ—Ç—ã</div>
            <select id="otdActivity" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)"></select>
            <div class="fieldError" id="otdActivityError" hidden></div>
          </label>

          <label id="otdActivityOtherWrap" hidden>
            <div style="font-size:12px; color:var(--muted); margin-bottom:6px">–£—Ç–æ—á–Ω–∏—Ç–µ –≤–∏–¥ —Ä–∞–±–æ—Ç—ã</div>
            <input id="otdActivityOther" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)" />
            <div class="fieldError" id="otdActivityOtherError" hidden></div>
          </label>

          <label>
            <div style="font-size:12px; color:var(--muted); margin-bottom:6px">–õ–æ–∫–∞—Ü–∏—è / –ø–æ–ª–µ</div>
            <select id="otdLocation" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)"></select>
            <div class="fieldError" id="otdLocationError" hidden></div>
          </label>

          <label id="otdLocationOtherWrap" hidden>
            <div style="font-size:12px; color:var(--muted); margin-bottom:6px">–£—Ç–æ—á–Ω–∏—Ç–µ –ª–æ–∫–∞—Ü–∏—é</div>
            <input id="otdLocationOther" type="text" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)" />
            <div class="fieldError" id="otdLocationOtherError" hidden></div>
          </label>

          <label>
            <div style="font-size:12px; color:var(--muted); margin-bottom:6px">–ö—É–ª—å—Ç—É—Ä–∞</div>
            <select id="otdCrop" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)"></select>
            <div class="fieldError" id="otdCropError" hidden></div>
          </label>

          <label id="otdTripsWrap" hidden>
            <div style="font-size:12px; color:var(--muted); margin-bottom:6px">–†–µ–π—Å—ã (–ö–∞–º–ê–ó)</div>
            <input id="otdTrips" type="number" min="0" step="1" placeholder="0" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)" />
          </label>

          <button class="btn" id="otdSubmit" type="button">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          <div id="otdResult" style="font-size:13px; color:var(--muted)"></div>
        </div>
      </section>

      <section class="card" id="screenAdmin" hidden>
        <div class="sectionTitle">–ê–¥–º–∏–Ω</div>
        <div style="display:flex; flex-direction:column; gap:10px">
          <div class="adminTabsRow">
            <button class="btn" id="adminTabRoles" type="button">–†–æ–ª–∏</button>
            <button class="btn btn--secondary" id="adminTabLocs" type="button">–õ–æ–∫–∞—Ü–∏–∏</button>
            <button class="btn btn--secondary" id="adminTabCrops" type="button">–ö—É–ª—å—Ç—É—Ä—ã</button>
            <button class="btn btn--secondary" id="adminTabActs" type="button">–†–∞–±–æ—Ç—ã</button>
            <button class="btn btn--secondary" id="adminTabMachines" type="button">–¢–µ—Ö–Ω–∏–∫–∞</button>
            <button class="btn btn--secondary" id="adminTabNotify" type="button">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</button>
          </div>

          <div id="adminSectionRoles">
          <div style="display:grid; grid-template-columns:1fr; gap:10px">
            <select id="adminRole" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)">
              <option value="">–†–æ–ª—å</option>
              <option value="it">IT</option>
              <option value="tim">TIM</option>
              <option value="brigadier">–ë—Ä–∏–≥–∞–¥–∏—Ä</option>
            </select>
          </div>
          <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px">
            <input id="adminUsername" type="text" placeholder="@username" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)" />
            <select id="adminUserPick" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)">
              <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</option>
            </select>
          </div>
          <button class="btn" id="adminAddRole" type="button">–î–æ–±–∞–≤–∏—Ç—å / –æ–±–Ω–æ–≤–∏—Ç—å —Ä–æ–ª—å</button>
          <button class="btn btn--secondary" id="adminExport" type="button">–≠–∫—Å–ø–æ—Ä—Ç</button>
          <div id="adminResult" style="font-size:13px; color:var(--muted)"></div>
          <div class="sectionTitle" style="margin-top:6px">–†–æ–ª–∏</div>
          <div id="adminRolesList"></div>
          </div>

          <div id="adminSectionLocs" hidden>
            <div class="sectionTitle" style="margin-top:2px">–õ–æ–∫–∞—Ü–∏–∏</div>
            <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px">
              <button class="btn" id="adminLocsTabFields" type="button">–ü–æ–ª—è</button>
              <button class="btn btn--secondary" id="adminLocsTabWare" type="button">–°–∫–ª–∞–¥</button>
            </div>

            <div id="adminSectionFields" style="margin-top:10px">
              <div style="display:grid; grid-template-columns:1fr; gap:10px">
                <div style="display:grid; grid-template-columns:1fr auto; gap:10px">
                  <input id="adminFieldsNew" type="text" placeholder="–ù–æ–≤–æ–µ –ø–æ–ª–µ" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)" />
                  <div style="display:grid; grid-template-columns:auto auto; gap:8px">
                    <button class="btn" id="adminFieldsAdd" type="button">–î–æ–±–∞–≤–∏—Ç—å</button>
                    <button class="btn btn--secondary btn--icon" id="adminFieldsSort" type="button" aria-label="–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞" title="–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞">‚ÜïÔ∏è</button>
                  </div>
                </div>
                <div id="adminFieldsResult" style="font-size:13px; color:var(--muted)"></div>
                <div id="adminFieldsList"></div>
              </div>
            </div>

            <div id="adminSectionWare" hidden style="margin-top:10px">
              <div style="display:grid; grid-template-columns:1fr; gap:10px">
                <div style="display:grid; grid-template-columns:1fr auto; gap:10px">
                  <input id="adminWareNew" type="text" placeholder="–ù–æ–≤–æ–µ –º–µ—Å—Ç–æ" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)" />
                  <div style="display:grid; grid-template-columns:auto auto; gap:8px">
                    <button class="btn" id="adminWareAdd" type="button">–î–æ–±–∞–≤–∏—Ç—å</button>
                    <button class="btn btn--secondary btn--icon" id="adminWareSort" type="button" aria-label="–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞" title="–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞">‚ÜïÔ∏è</button>
                  </div>
                </div>
                <div id="adminWareResult" style="font-size:13px; color:var(--muted)"></div>
                <div id="adminWareList"></div>
              </div>
            </div>
          </div>

          <div id="adminSectionCrops" hidden>
            <div class="sectionTitle" style="margin-top:2px">–ö—É–ª—å—Ç—É—Ä—ã</div>
            <div style="display:grid; grid-template-columns:1fr; gap:10px">
              <div style="display:grid; grid-template-columns:1fr auto; gap:10px">
                <input id="adminCropsNew" type="text" placeholder="–ù–æ–≤–∞—è –∫—É–ª—å—Ç—É—Ä–∞" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)" />
                <div style="display:grid; grid-template-columns:auto auto; gap:8px">
                  <button class="btn" id="adminCropsAdd" type="button">–î–æ–±–∞–≤–∏—Ç—å</button>
                  <button class="btn btn--secondary btn--icon" id="adminCropsSort" type="button" aria-label="–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞" title="–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞">‚ÜïÔ∏è</button>
                </div>
              </div>
              <div id="adminCropsResult" style="font-size:13px; color:var(--muted)"></div>
              <div id="adminCropsList"></div>
            </div>
          </div>

          <div id="adminSectionActs" hidden>
            <div class="sectionTitle" style="margin-top:2px">–†–∞–±–æ—Ç—ã</div>
            <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px">
              <button class="btn" id="adminActsTabTech" type="button">–¢–µ—Ö–Ω–∏–∫–∞</button>
              <button class="btn btn--secondary" id="adminActsTabHand" type="button">–†—É—á–Ω–∞—è</button>
            </div>
            <div style="display:grid; grid-template-columns:1fr; gap:10px; margin-top:10px">
              <div style="display:grid; grid-template-columns:1fr auto; gap:10px">
                <input id="adminActsNew" type="text" placeholder="–ù–æ–≤–∞—è —Ä–∞–±–æ—Ç–∞" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)" />
                <div style="display:grid; grid-template-columns:auto auto; gap:8px">
                  <button class="btn" id="adminActsAdd" type="button">–î–æ–±–∞–≤–∏—Ç—å</button>
                  <button class="btn btn--secondary btn--icon" id="adminActsSort" type="button" aria-label="–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞" title="–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞">‚ÜïÔ∏è</button>
                </div>
              </div>
              <div id="adminActsResult" style="font-size:13px; color:var(--muted)"></div>
              <div id="adminActsList"></div>
            </div>
          </div>

          <div id="adminSectionMachines" hidden>
            <div class="sectionTitle" style="margin-top:2px">–¢–µ—Ö–Ω–∏–∫–∞</div>
            <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px">
              <button class="btn" id="adminMachinesTabKinds" type="button">–¢–∏–ø—ã</button>
              <button class="btn btn--secondary" id="adminMachinesTabItems" type="button">–ï–¥–∏–Ω–∏—Ü—ã</button>
            </div>
            <div style="margin-top:10px">
              <div style="display:flex; align-items:center; gap:10px">
                <select id="adminMachineKindPick" style="flex:1; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)">
                  <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø —Ç–µ—Ö–Ω–∏–∫–∏</option>
                </select>
              </div>
              <div style="display:grid; grid-template-columns:1fr auto; gap:10px">
                <input id="adminMachinesNew" type="text" placeholder="–ù–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)" />
                <div style="display:grid; grid-template-columns:auto auto; gap:8px">
                  <button class="btn" id="adminMachinesAdd" type="button">–î–æ–±–∞–≤–∏—Ç—å</button>
                  <button class="btn btn--secondary btn--icon" id="adminMachinesSort" type="button" aria-label="–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞" title="–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞">‚ÜïÔ∏è</button>
                </div>
              </div>
              <div id="adminMachinesResult" style="font-size:13px; color:var(--muted)"></div>
              <div id="adminMachinesList"></div>
            </div>
          </div>

          <div id="adminSectionNotify" hidden>
            <div class="sectionTitle" style="margin-top:2px">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</div>
            <div style="display:flex; flex-direction:column; gap:10px">
              <input id="adminNotifyTitle" type="text" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)" />
              <textarea id="adminNotifyBody" placeholder="–¢–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è" rows="4" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text); resize:vertical"></textarea>

              <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px">
                <label style="display:flex; align-items:center; gap:10px; font-size:13px; color:var(--text)">
                  <input id="adminNotifyRoleUser" type="checkbox" /> –†–∞–±–æ—Ç–Ω–∏–∫
                </label>
                <label style="display:flex; align-items:center; gap:10px; font-size:13px; color:var(--text)">
                  <input id="adminNotifyRoleBrig" type="checkbox" /> –ë—Ä–∏–≥–∞–¥–∏—Ä
                </label>
              </div>

              <label style="display:flex; flex-direction:column; gap:6px;">
                <div style="font-size:12px; color:var(--muted)">–û—Ç–ª–æ–∂–∏—Ç—å –¥–æ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</div>
                <input id="adminNotifySendAt" type="datetime-local" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)" />
              </label>

              <div style="display:grid; grid-template-columns:1fr auto; gap:10px">
                <button class="btn" id="adminNotifySend" type="button">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                <button class="btn btn--secondary" id="adminNotifyRefresh" type="button">–û–±–Ω–æ–≤–∏—Ç—å</button>
              </div>
              <div id="adminNotifyResult" style="font-size:13px; color:var(--muted)"></div>

              <div class="sectionTitle" style="margin-top:6px">–û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ</div>
              <div id="adminNotifyScheduled"></div>
            </div>
          </div>
        </div>
      </section>

      <section class="card" id="screenStats" hidden>
        <div class="sectionTitle">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
        <div style="display:grid; grid-template-columns:1fr 1fr 1fr; gap:10px">
          <button class="btn" id="statsToday" type="button">–°–µ–≥–æ–¥–Ω—è</button>
          <button class="btn" id="statsWeek" type="button">–ù–µ–¥–µ–ª—è</button>
          <button class="btn" id="statsMonth" type="button">–ú–µ—Å—è—Ü</button>
        </div>
        <div id="statsResult" style="margin-top:10px"></div>
      </section>

      <section class="card" id="screenSettings" hidden>
        <div class="sectionTitle">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
        <div style="display:flex; flex-direction:column; gap:10px">
          <div style="display:flex; align-items:center; gap:12px">
            <div class="avatar" aria-hidden="true">
              <div class="avatar__inner" id="settingsAvatarPreview">T</div>
            </div>
            <div style="flex:1">
              <div style="font-size:12px; color:var(--muted); margin-bottom:6px">–ê–≤–∞—Ç–∞—Ä</div>
              <input id="settingsAvatarFile" type="file" accept="image/*" hidden />
              <button class="btn btn--secondary" id="settingsAvatarPick" type="button">–í—ã–±—Ä–∞—Ç—å —Ñ–æ—Ç–æ</button>
            </div>
          </div>
          <label>
            <div style="font-size:12px; color:var(--muted); margin-bottom:6px">–§–∞–º–∏–ª–∏—è –ò–º—è</div>
            <input id="settingsFullName" type="text" placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)" />
          </label>
          <button class="btn" id="settingsSave" type="button">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          <div id="settingsResult" style="font-size:13px; color:var(--muted)"></div>
        </div>
      </section>

      <section class="card" id="screenAvatarCrop" hidden>
        <div class="sectionTitle">–ê–≤–∞—Ç–∞—Ä</div>
        <div class="cropWrap" id="avatarCropWrap">
          <canvas class="cropCanvas" id="avatarCropCanvas" aria-label="–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä"></canvas>
          <div class="cropFrame" aria-hidden="true"></div>
        </div>
        <div style="margin-top:10px">
          <div style="font-size:12px; color:var(--muted); margin-bottom:6px">–ú–∞—Å—à—Ç–∞–±</div>
          <input id="avatarCropZoom" type="range" min="1" max="3" step="0.01" value="1" style="width:100%" />
        </div>
        <div style="margin-top:12px; display:grid; grid-template-columns:1fr 1fr; gap:10px">
          <button class="btn btn--secondary" id="avatarCropCancel" type="button">–û—Ç–º–µ–Ω–∞</button>
          <button class="btn" id="avatarCropSave" type="button">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
        <div id="avatarCropResult" style="font-size:13px; color:var(--muted); margin-top:8px"></div>
      </section>

      <section class="card" id="screenBrig" hidden>
        <div class="sectionTitle">–û–ë ‚Äî –æ—Ç—á—ë—Ç –±—Ä–∏–≥–∞–¥–∏—Ä–∞</div>
        <div style="display:flex; flex-direction:column; gap:10px">
          <label>
            <div style="font-size:12px; color:var(--muted); margin-bottom:6px">–î–∞—Ç–∞</div>
            <div class="inputWrap">
              <input id="brigDate" type="date" class="inputInner" />
            </div>
            <div class="fieldError" id="brigDateError" hidden></div>
          </label>
          <label>
            <div style="font-size:12px; color:var(--muted); margin-bottom:6px">–ö—É–ª—å—Ç—É—Ä–∞</div>
            <select id="brigCrop" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)"></select>
            <div class="fieldError" id="brigCropError" hidden></div>
          </label>
          <label>
            <div style="font-size:12px; color:var(--muted); margin-bottom:6px">–ü–æ–ª–µ</div>
            <select id="brigField" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)"></select>
            <div class="fieldError" id="brigFieldError" hidden></div>
          </label>
          <label>
            <div style="font-size:12px; color:var(--muted); margin-bottom:6px">–†—è–¥–æ–≤</div>
            <input id="brigRows" type="number" min="0" step="1" placeholder="0" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)" />
          </label>
          <label>
            <div style="font-size:12px; color:var(--muted); margin-bottom:6px">–õ—é–¥–µ–π</div>
            <input id="brigWorkers" type="number" min="0" step="1" placeholder="0" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)" />
          </label>
          <label>
            <div style="font-size:12px; color:var(--muted); margin-bottom:6px">–ú–µ—à–∫–æ–≤</div>
            <input id="brigBags" type="number" min="0" step="1" placeholder="0" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)" />
          </label>
          <button class="btn" id="brigSubmit" type="button">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          <div id="brigResult" style="font-size:13px; color:var(--muted)"></div>
        </div>
      </section>

      <section class="card" id="screenWeatherLocations" hidden>
        <div class="sectionTitle">–õ–æ–∫–∞—Ü–∏–∏ –ø–æ–≥–æ–¥—ã</div>
        <div class="hintText">–ù–∞–∂–º–∏ ¬´+¬ª, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –æ–±–ª–∞—Å—Ç—å. –ü–∏–Ω—ã –º–æ–∂–Ω–æ –¥–≤–∏–≥–∞—Ç—å, –¥–æ–±–∞–≤–ª—è—Ç—å –∏ —É–¥–∞–ª—è—Ç—å.</div>
        <div class="locGrid" id="weatherLocList"></div>
        <button class="plusCard" id="weatherLocAdd" type="button" aria-label="–î–æ–±–∞–≤–∏—Ç—å –ª–æ–∫–∞—Ü–∏—é">
          <div class="plusCard__inner">
            <div class="plusCard__plus">+</div>
            <div class="plusCard__text">–î–æ–±–∞–≤–∏—Ç—å –ª–æ–∫–∞—Ü–∏—é</div>
          </div>
        </button>
      </section>

      <section class="card" id="screenWeatherLocEdit" hidden>
        <div class="sectionTitle">–ù–æ–≤–∞—è –ª–æ–∫–∞—Ü–∏—è</div>
        <label>
          <div style="font-size:12px; color:var(--muted); margin-bottom:6px">–ù–∞–∑–≤–∞–Ω–∏–µ</div>
          <input id="weatherLocName" type="text" placeholder="–ü–æ–ª–µ ‚Ññ7" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)" />
        </label>

        <label style="margin-top:10px">
          <div style="font-size:12px; color:var(--muted); margin-bottom:6px">–ü–æ–∏—Å–∫ –Ω–∞ –∫–∞—Ä—Ç–µ</div>
          <input id="weatherLocSearch" type="text" placeholder="–ì–æ—Ä–æ–¥ / —Å–µ–ª–æ / —É–ª–∏—Ü–∞" style="width:100%; padding:12px 14px; border-radius:14px; border:1px solid var(--border); background:rgba(255,255,255,.04); color:var(--text)" />
        </label>
        <div id="weatherLocSearchResults" style="margin-top:8px"></div>

        <div class="mapWrap" id="weatherMapWrap">
          <div class="map" id="weatherMap"></div>
        </div>

        <div class="mapTools">
          <button class="btn btn--secondary" id="weatherPinAdd" type="button">+ –ü–∏–Ω</button>
          <button class="btn btn--secondary" id="weatherPinsReset" type="button">–°–±—Ä–æ—Å (–∫–≤–∞–¥—Ä–∞—Ç)</button>
        </div>
        <button class="btn" id="weatherLocSave" type="button">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–æ–∫–∞—Ü–∏—é</button>
        <div id="weatherLocEditResult" style="font-size:13px; color:var(--muted); margin-top:8px"></div>
      </section>

      <section class="card" id="screenWeatherLocView" hidden>
        <div class="sectionTitle" id="weatherViewTitle">–ü–æ–≥–æ–¥–∞</div>
        <section class="weather weather--clouds" id="weatherViewCard" style="margin-top:10px">
          <div class="weather__top">
            <div class="weather__place" id="weatherViewPlace">‚Äî</div>
            <div class="weather__temp" id="weatherViewTemp">‚Äî</div>
          </div>
          <div class="weather__bottom">
            <div class="weather__desc" id="weatherViewDesc">‚Äî</div>
            <div class="weather__meta">
              <span id="weatherViewPrecip">‚Äî</span>
              <span id="weatherViewUpdated">‚Äî</span>
            </div>
          </div>
        </section>
        <div class="sectionTitle" style="margin-top:12px">–û—Å–∞–¥–∫–∏ –Ω–∞ 24 —á–∞—Å–∞</div>
        <div class="forecast" id="weatherViewForecast"></div>
        <button class="btn btn--secondary" id="weatherLocDelete" type="button" style="margin-top:10px">–£–¥–∞–ª–∏—Ç—å –ª–æ–∫–∞—Ü–∏—é</button>
      </section>

      <section class="card" id="screenReportView" hidden>
        <div class="sectionTitle">–ó–∞–ø–∏—Å—å</div>
        <div id="reportViewBody" style="margin-top:10px"></div>
      </section>

      <section class="card muted" id="errorBox" hidden>
        <div class="errorTitle">–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</div>
        <div class="errorText" id="errorText"></div>
      </section>
    </main>

    <footer class="footer">
      <button class="btn btn--secondary" id="backBtn" type="button" hidden>–ù–∞–∑–∞–¥</button>
    </footer>
  </div>

  <div class="toast" id="toast" hidden></div>

  <div id="exportModal" hidden style="position:fixed; inset:0; z-index:9999; background:rgba(0,0,0,.45); padding:16px; display:flex; align-items:center; justify-content:center;">
    <div style="width:min(520px, 100%); border-radius:16px; border:1px solid var(--border); background:rgba(20,20,22,.98); color:var(--text); padding:14px 14px 12px 14px; box-shadow:0 10px 30px rgba(0,0,0,.35);">
      <div style="display:flex; align-items:center; justify-content:space-between; gap:10px;">
        <div style="font-weight:700;">–≠–∫—Å–ø–æ—Ä—Ç</div>
        <button class="btn btn--secondary" id="exportModalClose" type="button" style="padding:8px 10px; border-radius:12px;">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
      <div id="exportModalBody" style="margin-top:10px; font-size:13px; color:var(--muted); line-height:1.35;">‚Äî</div>
      <div id="exportModalProgress" style="margin-top:10px; height:10px; border-radius:10px; border:1px solid var(--border); background:rgba(255,255,255,.04); overflow:hidden;">
        <div id="exportModalBar" style="height:100%; width:0%; background:rgba(119, 210, 255, .55);"></div>
      </div>
    </div>
  </div>

  <script src="./app.js?v=11"></script>
</body>
</html>
